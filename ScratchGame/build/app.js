"use strict";!function(){var e=[5,10,20,50,100,500,1e3,5e3,1e4,25e3,5e4],n=new PIXI.Application(500,500),t=n.stage,i=[document.getElementById("slot1"),document.getElementById("slot2"),document.getElementById("slot3")],r=document.getElementById("body"),o=document.getElementById("winner_coins"),a=document.getElementById("reset_button");document.getElementById("canvas-container").appendChild(n.view),n.view.style.marginTop=-n.view.offsetHeight/2-100+"px",n.view.style.marginLeft=-n.view.offsetHeight/2+"px",function(){e.map(function(e){return PIXI.loader.add("coin_"+e,"images/coins/"+e+".png")}),PIXI.loader.add("forground","images/forground.jpg"),PIXI.loader.add("cursor","images/handicon.png");for(var n=1;n<=3;n++)PIXI.loader.add("scratch_brush_"+n,"images/scratchmask"+n+".png")}(),PIXI.loader.load(function(d,c){function s(){P=[],X=[],x=[0,0,0,0,0,0,0,0,0],b=!1,v=PIXI.RenderTexture.create(n.screen.width,n.screen.height),w=new PIXI.Sprite(v),t.interactive=!0,t.removeChildren(),u(),l(),t.addChild(y),t.addChild(I),t.addChild(w),h(),t.addChild(g);for(var e in i)i[e].style.backgroundImage="";r.className=""}function u(){(y=new PIXI.Sprite(c.forground.texture)).width=n.screen.width,y.height=n.screen.height}function l(){(I=new PIXI.Graphics).beginFill(6699034),I.drawRect(0,0,n.screen.width,n.screen.height),I.endFill(),I.mask=w}function h(){for(var n=100,i=50,r=0;r<3;r++)for(var o=0;o<3;o++)!function(r,o){function a(){return e[Math.floor(Math.random()*(e.length-1))]}t.addChild(function(){var e=new PIXI.Sprite(c["coin_"+a()].texture);return e.position.set(i+o*(n+i),i+r*(n+i)),e.width=n,e.height=n,e.mask=w,P.push(e),e}()),t.addChild(function(){var e=new PIXI.Graphics;return e.beginFill(0,0),e.drawRect(0,0,200,200),e.endFill(),e.position.set(1.25*i+o*(n+i),2*i+r*(n+i)),e.width=n/1.5,e.height=n/1.5,e.interactive=!0,X.push(e),e.on("pointermove",function(){var e=3*r+o;b&&!x[e]&&p(e)}),e}())}(r,o)}function f(e,n){x[e]=parseInt(n)}function p(n){function a(n){var t=[];if(d.map(function(i,r){i>=n&&t.push(e[r])}),t.length)if(t.sort(function(e,n){return n-e}),2===n){var i=0===c.indexOf(t[0])?1:0;c=[t[0],t[0],c[i]]}else c=[t[0],t[0],t[0]]}var d=[],c=[];f(n,P[n].texture.baseTexture.imageUrl.replace("images/coins/","").replace(".png","")),x.map(function(n){var t=e.indexOf(n);-1!==t&&(d[t]||(d[t]=0),d[t]++)}),d.map(function(n,t){c.push(e[t])}),c.sort(function(e,n){return n-e}),a(2),a(3),c.slice(0,3).map(function(e,n){i[n].style.backgroundImage="url(images/coins/"+e+".png)"}),-1===x.indexOf(0)&&(t.interactive=!1,r.className+=" show-overlay",c[0]===c[1]&&c[1]===c[2]?(r.className+=" winner",o.innerHTML=c[0]):r.className+=" loser")}var g=new PIXI.Sprite(c.cursor.texture),m=[new PIXI.Sprite(c.scratch_brush_1.texture),new PIXI.Sprite(c.scratch_brush_2.texture),new PIXI.Sprite(c.scratch_brush_3.texture)],I=void 0,v=void 0,w=void 0,y=void 0,P=void 0,X=void 0,x=void 0,b=!1;s(),t.interactive=!0,t.on("pointerdown",function(e){b=!0}),t.on("pointerup",function(){return b=!1}),t.on("pointermove",function(e){var t=e.data.global;if(g.position.copy(t),b){t.x-=50,t.y-=50;var i=m[Math.floor(Math.random()*(m.length-1))];i.position.copy(t),n.renderer.render(i,v,!1,null,!1)}}),a.addEventListener("click",s)})}();