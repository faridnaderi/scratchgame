"use strict";!function(){var e=[5,10,20,50,100,500,1e3,5e3,1e4,25e3,5e4],n=new PIXI.Application(500,500),t=n.stage,i=[document.getElementById("slot1"),document.getElementById("slot2"),document.getElementById("slot3")],r=document.getElementById("body"),o=document.getElementById("winner_coins"),a=document.getElementById("reset_button");document.getElementById("canvas-container").appendChild(n.view),n.view.style.marginTop=-n.view.offsetHeight/2-100+"px",n.view.style.marginLeft=-n.view.offsetHeight/2+"px",function(){e.map(function(e){return PIXI.loader.add("coin_"+e,"images/coins/"+e+".png")}),PIXI.loader.add("forground","images/forground.jpg"),PIXI.loader.add("cursor","images/handicon.png");for(var n=1;n<=3;n++)PIXI.loader.add("scratch_brush_"+n,"images/scratchmask"+n+".png")}(),PIXI.loader.load(function(c,d){function s(){P=[],X=[],x=[0,0,0,0,0,0,0,0,0],y=!1,p=PIXI.RenderTexture.create(n.screen.width,n.screen.height),v=new PIXI.Sprite(p),t.interactive=!0,t.removeChildren(),u(),l(),t.addChild(w),t.addChild(m),t.addChild(v),h(),t.addChild(I);for(var e in i)i[e].style.backgroundImage="";r.className=""}function u(){(w=new PIXI.Sprite(d.forground.texture)).width=n.screen.width,w.height=n.screen.height}function l(){(m=new PIXI.Graphics).beginFill(6699034),m.drawRect(0,0,n.screen.width,n.screen.height),m.endFill(),m.mask=v}function h(){for(var n=100,i=50,r=0;r<3;r++)for(var o=0;o<3;o++)!function(r,o){function a(){return e[Math.floor(Math.random()*(e.length-1))]}t.addChild(function(){var e=new PIXI.Sprite(d["coin_"+a()].texture);return e.position.set(i+o*(n+i),i+r*(n+i)),e.width=n,e.height=n,e.mask=v,P.push(e),e}()),t.addChild(function(){function e(){var e=3*r+o;y&&!x[e]&&g(e)}var t=new PIXI.Graphics;return t.beginFill(0,0),t.drawRect(0,0,200,200),t.endFill(),t.position.set(1.25*i+o*(n+i),2*i+r*(n+i)),t.width=n/1.5,t.height=n/1.5,t.interactive=!0,t.on("mouseover",e),t.on("touchmove",e),X.push(t),t}())}(r,o)}function f(e,n){x[e]=parseInt(n)}function g(n){function a(n){var t=[];if(c.map(function(i,r){i>=n&&t.push(e[r])}),t.length)if(t.sort(function(e,n){return n-e}),2===n){var i=0===d.indexOf(t[0])?1:0;d=[t[0],t[0],d[i]]}else d=[t[0],t[0],t[0]]}var c=[],d=[];f(n,P[n].texture.baseTexture.imageUrl.replace("images/coins/","").replace(".png","")),x.map(function(n){var t=e.indexOf(n);-1!==t&&(c[t]||(c[t]=0),c[t]++)}),c.map(function(n,t){d.push(e[t])}),d.sort(function(e,n){return n-e}),a(2),a(3),d.slice(0,3).map(function(e,n){i[n].style.backgroundImage="url(images/coins/"+e+".png)"}),-1===x.indexOf(0)&&(t.interactive=!1,r.className+=" show-overlay",d[0]===d[1]&&d[1]===d[2]?(r.className+=" winner",o.innerHTML=d[0]):r.className+=" loser")}var I=new PIXI.Sprite(d.cursor.texture),m=(new PIXI.Sprite(d.scratch_brush_1.texture),new PIXI.Sprite(d.scratch_brush_2.texture),void new PIXI.Sprite(d.scratch_brush_3.texture)),p=void 0,v=void 0,w=void 0,P=void 0,X=void 0,x=void 0,y=!1;s(),t.interactive=!0,t.on("pointerdown",function(e){y=!0}),t.on("pointerup",function(){return y=!1}),a.addEventListener("click",s)})}();