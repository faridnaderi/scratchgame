"use strict";!function(){var e=[5,10,20,50,100,500,1e3,5e3,1e4,25e3,5e4],n=new PIXI.Application(500,500),t=n.stage,r=[document.getElementById("slot1"),document.getElementById("slot2"),document.getElementById("slot3")],i=document.getElementById("body"),o=document.getElementById("winner_coins"),a=document.getElementById("reset_button");document.getElementById("canvas-container").appendChild(n.view),n.view.style.marginTop=-n.view.offsetHeight/2-100+"px",n.view.style.marginLeft=-n.view.offsetHeight/2+"px",function(){e.map(function(e){return PIXI.loader.add("coin_"+e,"images/coins/"+e+".png")}),PIXI.loader.add("forground","images/forground.jpg"),PIXI.loader.add("cursor","images/handicon.png");for(var n=1;n<=3;n++)PIXI.loader.add("scratch_brush_"+n,"images/scratchmask"+n+".png")}(),PIXI.loader.load(function(c,d){function s(){X=[],_=[],b=[0,0,0,0,0,0,0,0,0],k=!1,x=PIXI.RenderTexture.create(n.screen.width,n.screen.height),y=new PIXI.Sprite(x),t.interactive=!0,t.removeChildren(),u(),l(),t.addChild(P),t.addChild(w),t.addChild(y),g(),t.addChild(I);for(var e in r)r[e].style.backgroundImage="";i.className=""}function u(){(P=new PIXI.Sprite(d.forground.texture)).width=n.screen.width,P.height=n.screen.height}function l(){(w=new PIXI.Graphics).beginFill(6699034),w.drawRect(0,0,n.screen.width,n.screen.height),w.endFill(),w.mask=y}function h(e){var t=e.data.global;if(I.position.copy(t),k){t.x-=50,t.y-=50;var r=v[Math.floor(Math.random()*(v.length-1))];r.position.copy(t),n.renderer.render(r,x,!1,null,!1),f(t)}}function f(e){for(var n=0;n<3;n++)if(e.y>=30+150*n&&e.y<=120+150*n)for(var t=0;t<3;t++)e.x>=150*t&&e.x<=100+150*t&&k&&!b[3*n+t]&&m(n,t)}function g(){for(var n=100,r=50,i=0;i<3;i++)for(var o=0;o<3;o++)!function(i,o){function a(){return e[Math.floor(Math.random()*(e.length-1))]}t.addChild(function(){var e=new PIXI.Sprite(d["coin_"+a()].texture);return e.position.set(r+o*(n+r),r+i*(n+r)),e.width=n,e.height=n,e.mask=y,X.push(e),e}())}(i,o)}function p(e,t,r,i){function o(){c+=10,a.width=c,a.height=c,a.x-=c/25,a.y-=c/25,n.renderer.render(a,x,!1,null,!1),c>=150&&n.ticker.remove(o,a)}b[r]=parseInt(i);var a=new PIXI.Sprite(d.scratch_brush_2.texture);a.x=75+150*t,a.y=75+150*e;var c=0;n.ticker.add(o,a)}function m(n,a){function c(n){var t=[];if(s.map(function(r,i){r>=n&&t.push(e[i])}),t.length)if(t.sort(function(e,n){return n-e}),2===n){var r=0===u.indexOf(t[0])?1:0;u=[t[0],t[0],u[r]]}else u=[t[0],t[0],t[0]]}var d=3*n+a,s=[],u=[];p(n,a,d,X[d].texture.baseTexture.imageUrl.replace("images/coins/","").replace(".png","")),b.map(function(n){var t=e.indexOf(n);-1!==t&&(s[t]||(s[t]=0),s[t]++)}),s.map(function(n,t){u.push(e[t])}),u.sort(function(e,n){return n-e}),c(2),c(3),u.slice(0,3).map(function(e,n){r[n].style.backgroundImage="url(images/coins/"+e+".png)"}),-1===b.indexOf(0)&&(t.interactive=!1,i.className+=" show-overlay",u[0]===u[1]&&u[1]===u[2]?(i.className+=" winner",o.innerHTML=u[0].toFixed(0).replace(/./g,function(e,n,t){return n&&"."!==e&&(t.length-n)%3==0?","+e:e})):i.className+=" loser")}var I=new PIXI.Sprite(d.cursor.texture),v=[new PIXI.Sprite(d.scratch_brush_1.texture),new PIXI.Sprite(d.scratch_brush_2.texture),new PIXI.Sprite(d.scratch_brush_3.texture)],w=void 0,x=void 0,y=void 0,P=void 0,X=void 0,_=void 0,b=void 0,k=!1;s(),t.interactive=!0,t.on("pointerdown",function(e){k=!0}),t.on("pointerup",function(){return k=!1}),t.on("pointermove",h),a.addEventListener("click",s)})}();